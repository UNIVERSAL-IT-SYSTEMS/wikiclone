<big><big>"Work in progress" article, parts may be missing, lacking information or insult users. Any tips and changes to the article are encouraged and welcome. Crazy cows inside.</big></big>

= Scope =
Article aims to provide single article that explains basics of arch tester's work.

= Prerequisites =
This article assumes that readers passed Arch Tester (AT) quizz and know basics of work with shell, Gentoo and Portage.<br />
Recommended tools are:

{| class="wikitable"
|-
! Name !! Description !! How-to-use
|-
| tatt || arch testing tool || [https://github.com/tom111/tatt/blob/master/manual.org tatt's manpage]
|-
| eix || useful utilities for package searching || [http://en.gentoo-wiki.com/wiki/Eix eix on unofficial wiki]
|-
| ccache || compiler cache || [http://linux.die.net/man/1/ccache ccache's manpage]
|}

== stable enough system ==
System used for arch testing should be considered stable, this does not mean that tree must be ''stable'' though.

== make.conf ==
AT box should use mix of reasonably stable global CFLAGS (no -funsafe-optimizations, -funroll-loops etc).
Official x86 AT FAQ suggests these flags:

<pre>
LDFLAGS="${LDFLAGS} -Wl,--hash-style=gnu
FEATURES="test collision-protect"
</pre>

{{Note |<nowiki>
FEATURES=test may be redundant if you plan to use tatt.
</nowiki>}}

Other useful flags are ''GFLAGS="-g3 -ggdb"'' and ''USE="debug"'', these are, however, only meant to be used on per package bassis in case you can (and want to) provide nice bug reports and show some love to developers.

= Build testing =

== ebuild checking and repoman ==
Repoman is tool that checks ebuilds for common mistakes (hey, maintainers are people too). Rule of thumb dictates that only repoman-checked ebuilds should go into the tree, but this ain't always true especially is ebuilds are big and complicated. As an AT, you should be able to use this tool to check ebuilds and then go over ebuild itself to verify that warnings will cause no problems.<br />
<todo> Another thing to do is to remove unneeded die checks in EAPI-4 functions <insert more info here with relevant links>. <br />
<todo> Insert some info on B/RDEP validating within ebouild.

== tatt ==
This tool basically creates simple, automated test-suite that emerge package with various use-flag combination and also does set FEATURES="test" in one pass of it's work (this is why this should not be enabled globally).
Package will emerge multiple times, thus ccache is simply must-have here.

{{RootCmd |tatt -b 423987 
|output=<pre>
Bugnumber:  423987
Stabilization bug detected.
Jobname: gimps
Found the following package atom : =sci-mathematics/gimps-27.7-r1
Unmasked =sci-mathematics/gimps-27.7-r1 in /etc/portage/package.keywords/archtest
No stable rdeps for gimps
Success Report script written to gimps-success.sh
Commit script written to gimps-commit.sh
</pre>}}
This command will generate 4 scripts in your current directory:
{{Cmd |ls
|output= gimps-cleanup.sh  gimps-commit.sh  gimps-success.sh  gimps-useflags.sh }}
{{RootCmd | sh gimps-useflags.sh}}
<pkg>-useflags.sh script will start batch emerge of package with different USE flags to make sure everything is ok.
Test results are written to {{Path|./<pkg>.report}}.
{{RootCmd | sh gimps-cleanup.sh}}
<pkg>-cleanup.sh will remove keyword from {{Path|/etc/portage/package.keywords/archtest}} and created scripts.

{{Note
|tatt assumes that package.keywords is a directory, if you have in this path file, it will not work. Fix is intuitive, backup your package.keywords, create directory with this name instead and place your backup in it.
}}

{{RootCmd | sh gimps-commit.sh}}
{{RootCmd | sh gimps-success.sh}}
<todo><Write something here>

= Run testing =
<todo> executables vs libraries

= Bug reporting =
== gentoo bugzilla ==

== upstream bugzilla ==

= Summary - checklist  =
<fill in numbered list of things that needs to be done>

= Useful shell aliases =

= Links =
<todo><links to AT's projects, x86 AT FAQ, Quizzes etc><br />

[http://www.gossamer-threads.com/lists/gentoo/dev/246347 "how to help in arch testing work" @gentoo-dev mailing list]<br />

[http://www.gentoo.org/proj/en/base/x86/arch-testers-faq.xml Gentoo x86 Arch Tester's FAQ]<br />

[http://www.gentoo.org/proj/en/base/amd64/at/procedures.xml Gentoo/AMD64 Arch Testers' Guide]<br />
